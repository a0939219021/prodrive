<!doctype html>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Web Bluetooth Quick Test (iOS Bluefy)</title>
<body style="font-family:system-ui,Arial;padding:16px">
<h3>Web Bluetooth Quick Test</h3>
<button id="btn" style="padding:10px 14px;font-weight:700">🔗 Connect</button>
<pre id="out" style="white-space:pre-wrap;background:#111;color:#ddd;padding:12px;border-radius:8px;margin-top:12px"></pre>
<script>
const out = document.getElementById('out');
function log(s){ out.textContent = s; }
if (!('bluetooth' in navigator)) {
  log('❌ 此瀏覽器不支援 Web Bluetooth。\n請到 iOS 設定→隱私權與安全性→藍牙→開啟 Bluefy 權限，並使用 Bluefy 開啟本頁。');
}
document.getElementById('btn').addEventListener('click', async ()=>{
  try{
    log('Opening chooser...');
    const dev = await navigator.bluetooth.requestDevice({
      acceptAllDevices: true, optionalServices: ['0000fff0-0000-1000-8000-00805f9b34fb']
    });
    log('Selected: ' + (dev.name || '(no name)'));
  }catch(e){
    log('Error: ' + e.name + ' - ' + e.message + '\n(若沒有跳出清單，多半是權限或藍牙被其他 App 佔用)');
  }
});
</script>
</body>
