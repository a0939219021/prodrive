<!doctype html><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<title>BLE Debug Scanner</title>
<body style="font-family:system-ui;background:#0b1220;color:#e5e7eb">
<div style="max-width:720px;margin:auto;padding:16px">
  <button id="btn" style="padding:10px 14px;font-weight:700">ðŸ”Ž Scan & Connect</button>
  <pre id="out" style="white-space:pre-wrap;background:#111827;border-radius:12px;padding:12px;margin-top:12px"></pre>
</div>
<script>
const out = d=>document.getElementById('out').textContent=d;
document.getElementById('btn').onclick = async ()=>{
  out('Scanning...');
  try{
    const dev = await navigator.bluetooth.requestDevice({ acceptAllDevices:true, optionalServices: [] });
    dev.addEventListener('gattserverdisconnected', ()=> out('Disconnected.'));
    const server = await dev.gatt.connect();
    const services = await server.getPrimaryServices();
    let txt = `Connected: ${dev.name||'(no name)'}\nServices: ${services.length}\n\n`;
    for(const s of services){
      txt += `Service ${s.uuid}\n`;
      const chs = await s.getCharacteristics();
      for(const c of chs){
        let props = Object.keys(c.properties).filter(k=>c.properties[k]).join(',');
        txt += `  Char ${c.uuid}  [${props}]\n`;
      }
      txt+='\n';
    }
    out(txt);
  }catch(e){ out('Error: '+e); }
};
</script>
